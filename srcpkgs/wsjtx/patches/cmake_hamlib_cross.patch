--- CMakeLists.txt	2019-02-24 23:11:18.000000000 -0500
+++ CMakeLists.txt.fix	2019-05-19 00:43:03.724194227 -0400
@@ -79,6 +79,10 @@
 
 include (ExternalProject)
 
+if (DEFINED ENV{CROSS_BUILD})
+  get_filename_component(cross_triplet $ENV{XBPS_CROSS_BASE} NAME)
+  set (hamlib_cross "--host=${cross_triplet}")
+endif ()
 
 #
 # build and install hamlib locally so it can be referenced by the
@@ -91,7 +95,7 @@
   URL_HASH MD5=${hamlib_md5sum}
   UPDATE_COMMAND ./bootstrap
   PATCH_COMMAND ${PATCH_EXECUTABLE} -p1 -N < ${CMAKE_CURRENT_SOURCE_DIR}/hamlib.patch
-  CONFIGURE_COMMAND <SOURCE_DIR>/configure --prefix=<INSTALL_DIR> --disable-shared --enable-static --without-cxx-binding ${EXTRA_FLAGS} # LIBUSB_LIBS=${USB_LIBRARY}
+  CONFIGURE_COMMAND <SOURCE_DIR>/configure --prefix=<INSTALL_DIR> --disable-shared --enable-static --without-cxx-binding ${EXTRA_FLAGS} ${hamlib_cross} # LIBUSB_LIBS=${USB_LIBRARY}
   BUILD_COMMAND $(MAKE) all V=1 # $(MAKE) is ExternalProject_Add() magic to do recursive make
   INSTALL_COMMAND $(MAKE) install-strip V=1 DESTDIR=""
   STEP_TARGETS update install
